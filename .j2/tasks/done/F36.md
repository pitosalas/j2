# F36 — Auto-Generate Tasks After /features-update Adds a Feature

## Tasks

### T01 — Update update_features.md to enforce two-section invariant
**Status**: done
**Description**: Add an explicit instruction to `update_features.md` requiring Claude to always write `features.md` with two clearly delimited sections: incomplete features first (High → Medium → Low), completed features second (High → Medium → Low). The instruction must appear after the "Apply the requested changes" paragraph so it applies on every write, not only when adding features.

### T02 — Update update_features.md to auto-generate tasks for new features
**Status**: done
**Description**: After the feature-list output instruction in `update_features.md`, add a paragraph instructing Claude to detect any newly added feature IDs (those not present in the `--- CURRENT FEATURES BEGIN ---` block) and generate a task file at `.j2/tasks/<FID>.md` for each, using the same format and rules as `/tasks-gen`. If no new features were added (only modifications or removals), skip task generation.

### T03 — Write test verifying update_features template contains auto-task-gen instruction
**Status**: done
**Description**: In the test suite, add a test that reads `.j2/templates/update_features.md` and asserts it contains text matching the auto-task-gen instruction (e.g. checks for keywords like "newly added" and "task file"). This is a content-presence test, not a behavioral test, keeping it fast and dependency-free. Name the test `test_update_features_template_contains_auto_task_gen`.

### T04 — Write test verifying update_features template contains two-section invariant instruction
**Status**: done
**Description**: Add a test that reads `.j2/templates/update_features.md` and asserts it contains text describing the two-section ordering requirement (e.g. checks for "incomplete" and "completed" section keywords). Name the test `test_update_features_template_contains_two_section_invariant`.
