# F27 — Fix Code Review Violations

### T01 — Add file header comments to runner.py
**Status**: done
**Description**: `runner.py` already has a shebang and a description docstring but is missing the required Author and MIT license comments. Add `# Author: Pito Salas and Claude Code` and `# Open Source Under MIT license` as line comments after the module docstring on lines 3-4.

---

### T02 — Inline `find_placeholders` in main()
**Status**: done
**Description**: Evaluated for inlining. `find_placeholders` is called at 15+ test sites directly as `runner.find_placeholders(...)`. Inlining would duplicate the regex across all tests, violating DRY. Kept as a named function; body simplified to one-liner without comment.

---

### T03 — Inline `load_template` in main()
**Status**: done
**Description**: Evaluated for inlining. `load_template` is called at 15+ test sites directly. DRY wins — kept as a named function; body simplified to one-liner without comment.

---

### T04 — Inline or remove `load_features` and `load_rules` wrappers
**Status**: done
**Description**: `load_features` called in 4 production sites — kept (DRY). `load_rules` not called from tests; inlined as `(root / settings["j2"]["rules_file"]).read_text()` in the `build_context` lambda and function removed. 103 tests pass.

---

### T05 — Add file headers to test_runner.py
**Status**: done
**Description**: `test_runner.py` is missing the required shebang line, Author comment, and MIT license comment. Add `#!/usr/bin/env python3` as line 1, then `# Author: Pito Salas and Claude Code` and `# Open Source Under MIT license` after the existing module docstring. Verify all 103 tests still pass.

---

### T06 — Split test_runner.py to stay under 500 lines
**Status**: done
**Description**: `test_runner.py` is 1363 lines, nearly 3× the 500-line limit. Split it into multiple files by logical group: e.g. `test_runner_core.py` (context-building and template tests), `test_runner_commands.py` (per-command render tests), `test_runner_footer.py` (footer and state tests). Keep shared fixtures in a `conftest.py`. All 103 tests must still pass and `pytest tests/` must collect them all.

---

### T07 — Add file headers to test_commands.py
**Status**: done
**Description**: `test_commands.py` is missing the required shebang line, Author comment, and MIT license comment. Add `#!/usr/bin/env python3` as line 1, then the two header comments after the module docstring. Verify all tests still pass.

---

### T08 — Inline `command_file` and `command_content` wrappers in test_commands.py
**Status**: done
**Description**: `command_file` and `command_content` are 1-line body wrappers used only inside the test functions in that file. Remove both functions and inline their bodies at each call site. Verify all tests pass.
